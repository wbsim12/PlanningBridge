<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration Form</title>
    <link rel="stylesheet" href="/css/admin/registerUser.css">
</head>
<body>
<div class="container">
    <h1>User Registration</h1>

    <form action="/admin/registerUser" method="post">
        <div class="form-group">
            <label for="account">Account*:</label>
            <input type="text" id="account" name="account" value="{{userDTO.account}}">
            {{#errors.account}}
                    <div class="error-message">{{defaultMessage}}</div>
            {{/errors.account}}
            {{#errorMessage}}
                <div class="error-message">{{errorMessage}}</div>
            {{/errorMessage}}

        </div>
        <div class="form-group">
            <label for="password">Password*:</label>
            <input type="password" id="password" name="password" value="{{userDTO.password}}">
            {{#errors}}
                {{#fields.password}}
                    <div class="error-message">{{defaultMessage}}</div>
                {{/fields.password}}
            {{/errors}}
        </div>
        <div class="form-group">
            <label for="email">Email*:</label>
            <input type="email" id="email" name="email" value="{{userDTO.email}}">
            {{#errors}}
                {{#fields.email}}
                    <div class="error-message">{{defaultMessage}}</div>
                {{/fields.email}}
            {{/errors}}
        </div>
        <div class="form-group">
            <label for="phoneNumber">Phone Number:</label>
            <input type="tel" id="phoneNumber" name="phoneNumber" value="{{userDTO.phoneNumber}}">
            {{#errors}}
                {{#fields.phoneNumber}}
                    <div class="error-message">{{defaultMessage}}</div>
                {{/fields.phoneNumber}}
            {{/errors}}
        </div>
        <div class="form-group">
            <label for="name">Name*:</label>
            <input type="text" id="name" name="name" value="{{userDTO.name}}">
            {{#errors}}
                {{#fields.name}}
                    <div class="error-message">{{defaultMessage}}</div>
                {{/fields.name}}
            {{/errors}}
        </div>
        <div class="form-group">
            <label for="checkAdmin">Admin:</label>
            <input type="checkbox" id="checkAdmin" name="checkAdmin" onchange="toggleGuestOption()">
        </div>
        <div class="form-group">
            <label for="checkGuest">Guest:</label>
            <input type="checkbox" id="checkGuest" name="checkGuest" onchange="toggleGuestOption()">
        </div>
        <div class="form-group" id="companyField" style="display: none;">
            <label for="company">Company:</label>
            <input type="text" id="company" name="company" disabled>
        </div>
        <div class="form-group">
            <label for="departmentPK">Department:</label>
            <select id="departmentPK" name="departmentPK">
                <option value="">Select Department</option>
                {{#departments}}
                    <option value="{{departmentPK}}">{{name}}</option>
                {{/departments}}
            </select>
        </div>

        <div class="form-group">
            <label for="positionPK">Position:</label>
            <select id="positionPK" name="positionPK">
                <option value="">Select Position</option>
                {{#positions}}
                    <option value="{{positionPK}}">{{name}}</option>
                {{/positions}}
            </select>
        </div>

        <div class="form-group">
            <button type="submit">Register</button>
        </div>
    </form>
</div>
<script>
    function toggleGuestOption() {
        const adminCheckbox = document.getElementById('checkAdmin');
        const guestCheckbox = document.getElementById('checkGuest');
        const companyField = document.getElementById('companyField');
        const companyInput = document.getElementById('company');
        const departmentSelect = document.getElementById('departmentPK');
        const positionSelect = document.getElementById('positionPK');

        // Admin 체크 시
        if (adminCheckbox.checked) {
            guestCheckbox.disabled = true;
            guestCheckbox.checked = false;
            companyField.style.display = 'none';
            companyInput.disabled = true;
            departmentSelect.disabled = false;
            positionSelect.disabled = false;
        } else {
            guestCheckbox.disabled = false;
        }

        // Guest 체크 시
        if (guestCheckbox.checked) {
            adminCheckbox.disabled = true;
            companyField.style.display = 'block';
            companyInput.disabled = false;
            departmentSelect.disabled = true;
            positionSelect.disabled = true;
            departmentSelect.value = "";
            positionSelect.value = "";
        } else {
            adminCheckbox.disabled = false;
            companyField.style.display = 'none';
            companyInput.disabled = true;
            departmentSelect.disabled = false;
            positionSelect.disabled = false;
        }
    }
</script>
</body>
</html>